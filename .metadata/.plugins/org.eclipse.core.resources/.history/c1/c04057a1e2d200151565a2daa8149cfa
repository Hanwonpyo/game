package game;

public class Game {
	
	User A,B;
	Dice firstDice,secondDice;
	int distance;

	public void setting()
	{
		cityFactory factory=new cityFactory();
		
		this.makingMap();
		
		A=new User();
		B=new User();
		A.setMoney(200);
		B.setMoney(200);
		
		firstDice=new Dice();
		secondDice=new Dice();	
	}
	
	public void playing()
	{
		while(A.getMoney()>0 && B.getMoney()>0) {
			//UserA 중앙에 턴 메세지 출력
			//rolling 버튼 누르면
			firstDice.rollDice();
			secondDice.rollDice();
			distance=firstDice.getNumber()+
					secondDice.getNumber();
			A.setLocation(distance);
			City city_at_A;
			city_at_A=cityManager.getInstance().list().get(A.getLocation());
			if(city_at_A.getOwner()==A || city_at_A.getOwner()==null) {
				//select();
				//when buying
				if(city_at_A.getbuildingCount()<3) {
					if((A.getMoney()-city_at_A.getCost())>0) {
						A.setMoney(-city_at_A.getCost());
						city_at_A.addbuilingCount();
					}
				}
			}
			if(city_at_A.getOwner()==B) {
				A.setMoney(-city_at_A.getCost());
				B.setMoney(+city_at_A.getCost());
			}
			//location에 해당하는 city 받아서
			//상대방땅이면 A.setMoney(-cost),B.setMoney(+cost)
			//내땅이거나 빈 땅이면 돈은 그대로, 살것인지 말것인지 결정
			//사는 경우(Buy 버튼 누르면), 해당 location의 땅(City) 정보 받아온 후
			//money>cost이면 City에 User 정보 추가
			
			//UserB
			firstDice.rollDice(); 
			secondDice.rollDice();
			distance=firstDice.getNumber()+
					secondDice.getNumber();
			B.setLocation(distance);
			City city_at_B;
			city_at_B=cityManager.getInstance().list().get(B.getLocation());
			if(city_at_B.getOwner()==B || city_at_B.getOwner()==null) {
				//select();
				if(city_at_B.getbuildingCount()<3) {
					if((B.getMoney()-city_at_B.getCost())>0) {
						B.setMoney(-city_at_B.getCost());
						city_at_B.addbuilingCount();
					}
				}
			}
			if(city_at_B.getOwner()==A) {
				B.setMoney(-city_at_A.getCost());
				A.setMoney(+city_at_A.getCost());
			}
		}
		
	}
	
	public void makingMap()
	{
		
	}
}
